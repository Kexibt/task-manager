# task-manager

# Тестовое задание на позицию Junior Go разработчика

## Задание
Необходимо реализовать таск-трекер на языке программирования GO.
Реализовать необходимо только back часть

## Методы
* /sign_in - авторизация пользователя в сервисе
* /sign_up - регистрация пользователя в сервисе
* /create_task - создание таски
* /edit_task - редактирование таски
* /delete_task - удаление таски
* /get_task - получение информации по определенной таски пользователя
* /get_tasks - получение информации по всем таскам пользователя
* /get_tasks_after - получение информации по всем таскам пользователя созданным/обновленным после определенного момента времени

## Техническая реализация:
* Сервис принимает и возвращает запросы и ответы в формате JSON
* Таски и пользователи хранятся в базе Postgres
* Проект собран в docker-compose

## Регистрация пользователя
Запрос содержит поля "login" и "password", в которых содержится логин и пароль. Пароль хешируется и сохраняется в бд. В случае успешной регистрации возвращается статус 200 и ответ, уведомляющий о успешной регистрации. В противном случае, статус 400 и ошибка.

Пример запроса:
```json
{
    "login": "test_login",
    "password": "test_pass"
}
```
Пример ответа в случае успеха:
```json
{
    "result": "user successfully created"
}
```
Пример ответа в случае ошибки:
```json
{
    "error": "user already exists"
}
```

## Авторизация пользователя
Запрос содержит поля "login" и "password", в которых содержится логин и пароль. Пароль хешируется и сравнивается с тем, что сохранен в бд. В случае успешной авторизации возвращается статус 200, ответ, уведомляющий о успешной авторизации, и токен в cookie. В противном случае, статус 400 и ошибка.

Пример запроса:
```json
{
    "login": "test_login",
    "password": "test_pass"
}
```
Пример ответа в случае успеха:
```json
{
    "result": "success"
}
```
Пример ответа в случае ошибки:
```json
{
    "error": "invalid password, try another one"
}
```

## Создание таски
Запрос содержит поля "title", "description" и "status", в которых содержится название, описание и статус. В случае успешного создания возвращается статус 200 и ответ, содержащий id созданной таски. В противном случае, статус 400 и ошибка.

Пример запроса:
```json
{
    "title" : "title",
    "description" : "description",
    "status" : "todo"
}
```
Пример ответа в случае успеха:
```json
{
    "result": "successfully added, id: 3"
}
```
Пример ответа в случае ошибки:
```json
{
    "error": "authorization required"
}
```

## Редактирование таски
Запрос содержит поля "id", "title", "description", "status", "new owner" в которых содержится id, название, описание, статус и новый владелец. Допускается отсутствие некоторых полей, если нужно редактировать не все поля. В случае успешного редактирования возвращается статус 200 и ответ, содержащий id редактированной таски. В противном случае, статус 400 и ошибка.

Пример запроса:
```json
{
    "id" : 1,
    "title": "changed title",
    "status": "done"
}
```
Пример ответа в случае успеха:
```json
{
    "result": "successfully edited, id: 3"
}
```
Пример ответа в случае ошибки:
```json
{
    "error": "ID must be not null"
}
```

## Удаление таски
Запрос содержит поле "id", в котором содержится id таски для удаления. В случае успешного удалениия возвращается статус 200 и ответ, уведомляющий о удалении таски. В противном случае, статус 400 и ошибка.

Пример запроса:
```json
{
    "id" : 3
}
```
Пример ответа в случае успеха:
```json
{
    "result": "successfully deleted"
}
```
Пример ответа в случае ошибки:
```json
{
    "error": "task not found"
}
```

## Получение информации о таске
Запрос содержит поле "id", в котором содержится id таски для просмотра. В случае успешного нахождения информации возвращается статус 200 и ответ, содержащий детальную информацию по таске. В противном случае, статус 400 и ошибка.

Пример запроса:
```json
{
    "id" : 1
}
```
Пример ответа в случае успеха:
```json
{
    "id": 1,
    "title": "title",
    "description": "description",
    "status": "todo",
    "userid": "integr_test_user",
    "last update date": "Tue Oct 11 12:16:08 UTC 2022"
}
```
Пример ответа в случае ошибки:
```json
{
    "error": "task not found"
}
```

## Получение информации о всех тасках
Запрос не содержит полей. В задании явно не сказано, какие таски возвращать, поэтому я сделал возврат пользовательских. В случае, если пользователь найден, то возвращается массив его тасок(в случае отсутствия последних возвращается пустой массив). В противном случае статус 400 и ошибка.

Пример запроса:
```json
{
}
```
Пример ответа в случае успеха:
```json
[
    {
        "id": 1,
        "title": "title",
        "description": "description",
        "status": "todo",
        "userid": "integr_test_user",
        "last update date": "Tue Oct 11 12:37:31 UTC 2022"
    },
    {
        "id": 2,
        "title": "title",
        "description": "",
        "status": "todo",
        "userid": "integr_test_user",
        "last update date": "Tue Oct 11 12:37:31 UTC 2022"
    }
]
```
Пример ответа в случае ошибки:
```json
{
    "error": "authorization required"
}
```

## Получение информации о всех тасках измененных/созданных после определенного момента времени
Запрос содержит поле "date", содержащие дату в формате "yyyy-mm-ddThh:mm:ssZ". В задании явно не сказано, какие таски возвращать, поэтому я сделал возврат пользовательских. В случае, если пользователь найден, то возвращается массив его тасок(в случае отсутствия последних возвращается пустой массив). В противном случае статус 400 и ошибка.

Пример запроса:
```json
{
    "date" : "2022-10-11T14:32:00+03:00"
}
```
Пример ответа в случае успеха:
```json
[
    {
        "id": 1,
        "title": "title",
        "description": "description",
        "status": "todo",
        "userid": "integr_test_user",
        "last update date": "Tue Oct 11 12:37:31 UTC 2022"
    },
    {
        "id": 2,
        "title": "title",
        "description": "",
        "status": "todo",
        "userid": "integr_test_user",
        "last update date": "Tue Oct 11 12:37:31 UTC 2022"
    }
]
```
Пример ответа в случае ошибки:
```json
{
    "error": "authorization required"
}
```